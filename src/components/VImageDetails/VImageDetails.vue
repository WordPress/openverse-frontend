<template>
  <section class="w-full">
    <div class="flex flex-row justify-between items-center mb-6">
      <h3 class="text-2xl md:text-3xl">
        {{ $t('image-details.information.title') }}
      </h3>
      <span
        class="flex flex-row justify-end items-center text-sr text-dark-charcoal-70 font-semibold"
        >{{ $t('image-details.report.short') }} <FlagSvg class="ms-2"
      /></span>
    </div>
    <dl>
      <div>
        <dt>{{ $t('image-details.information.type') }}</dt>
        <dd class="uppercase">{{ imgType }}</dd>
      </div>
      <div v-if="providerName != sourceName">
        <dt>{{ $t('image-details.information.provider') }}</dt>
        <dd>{{ providerName }}</dd>
      </div>
      <div>
        <dt>{{ $t('image-details.information.source') }}</dt>
        <dd>
          <a
            :href="image.foreign_landing_url"
            target="blank"
            rel="noopener noreferrer"
            class="text-pink"
            >{{ sourceName }}</a
          >
        </dd>
      </div>
      <div>
        <dt>{{ $t('image-details.information.dimensions') }}</dt>
        <dd>
          <!-- eslint-disable @intlify/vue-i18n/no-raw-text -->
          {{ imageWidth }} &times; {{ imageHeight }}
          {{ $t('photo-details.information.pixels') }}
        </dd>
      </div>
      <!-- <div>
        <dt>{{ $t("image-details.information.") }}</dt>
        <dd>{{ image. }}</dd>
      </div> -->
    </dl>
  </section>
</template>

<script>
import { computed, defineComponent, useContext } from '@nuxtjs/composition-api'

import FlagSvg from '~/assets/icons/flag.svg?inline'

const VImageDetails = defineComponent({
  name: 'VImageDetails',
  components: { FlagSvg },
  props: {
    image: {
      type: Object,
      required: true,
    },
    imageWidth: {
      type: Number,
    },
    imageHeight: {
      type: Number,
    },
    imageType: {
      type: String,
    },
  },
  setup(props) {
    const { store } = useContext()

    const imgType = computed(() => {
      if (props.imageType) {
        if (props.imageType.split('/').length > 1) {
          return props.imageType.split('/')[1].toUpperCase()
        }
        return props.imageType
      }
      return 'Unknown'
    })

    function getProviderName(nameCode) {
      return nameCode ? store.getters['provider/getProviderName'](nameCode) : ''
    }

    const providerName = computed(() => getProviderName(props.image.provider))

    const sourceName = computed(() => getProviderName(props.image.source))

    return { imgType, providerName, sourceName }
  },
})
export default VImageDetails
</script>

<style scoped>
dl {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  grid-gap: 1rem;
}

dt,
dd {
  @apply text-sm;
}

dd {
  @apply font-bold mt-2 md:text-base;
}
</style>
