<template>
  <button
    type="button"
    class="transition-colors"
    :class="[$style.button, selected && $style['button-pressed']]"
    :aria-pressed="selected"
    @click="handleClick"
  >
    <VIcon :icon-path="iconPath" class="me-2 flex-shrink-0" />
    <span>{{ $t(`search-type.${contentType}`) }}</span>
  </button>
</template>

<script>
import { computed, defineComponent } from '@nuxtjs/composition-api'
import {
  ALL_MEDIA,
  AUDIO,
  IMAGE,
  supportedContentTypes,
} from '@/constants/media'
import VIcon from '@/components/VIcon/VIcon.vue'

import audioIcon from 'assets/icons/audio-wave.svg'
import imageIcon from 'assets/icons/image.svg'
import allIcon from 'assets/icons/all-content.svg'

const iconMapping = {
  [AUDIO]: audioIcon,
  [IMAGE]: imageIcon,
  [ALL_MEDIA]: allIcon,
}

export default defineComponent({
  name: 'VContentTypeButton',
  components: { VIcon },
  props: {
    /**
     * One of the media types supported.
     */
    contentType: {
      type: String,
      required: true,
      validator: (val) => supportedContentTypes.includes(val),
    },
    selected: {
      type: Boolean,
      default: false,
    },
  },
  setup(props, { emit }) {
    const iconPath = computed(() => iconMapping[props.contentType])
    const handleClick = () => emit('select', props.contentType)
    return { iconPath, handleClick }
  },
})
</script>
<style module>
.button {
  @apply flex flex-row items-center p-2 rounded-sm text-sr font-semibold bg-tx border border-dark-charcoal  focus-visible:outline-none focus-visible:ring focus-visible:ring-pink focus-visible:border-tx;
}
.button-pressed {
  @apply text-white bg-dark-charcoal;
}
</style>
